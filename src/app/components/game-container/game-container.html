<div class="game-container">
  @if (!gameState.isGameStarted()) {
    <!-- Show game setup before game starts -->
    <app-game-setup (gameStart)="onGameStart($event)"></app-game-setup>
  } @else {
    <!-- Show game in progress -->
    @if (gameState.config()?.inputMode === 'touch' && !gameState.isGameFinished()) {
      <!-- Touch mode: Landscape layout with everything on left, dartboard on right -->
      <app-touch-mode></app-touch-mode>
    } @else {
      <!-- Show header for non-touch modes -->
      <div class="game-header">
        <h1>Dartomat</h1>
        <button class="reset-btn" (click)="resetGame()">New Game</button>
      </div>

      <!-- Portrait layout for other modes -->
      <app-scoreboard></app-scoreboard>

      <!-- Show appropriate input mode based on config -->
      @if (!gameState.isGameFinished()) {
        @if (gameState.config()?.inputMode === 'calculating') {
          <app-calculating-mode></app-calculating-mode>
        } @else if (gameState.config()?.inputMode === 'input') {
          <app-input-mode></app-input-mode>
        }
      } @else {
        <!-- Game finished -->
        <div class="game-finished">
          <button class="new-game-btn" (click)="resetGame()">Start New Game</button>
        </div>
      }
    }
  }
</div>
